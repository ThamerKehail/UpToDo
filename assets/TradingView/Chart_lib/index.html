<!DOCTYPE HTML>
<html>

<head>

	<title>TradingView Charting Library demo</title>

	<!-- Fix for iOS Safari zooming bug -->
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">

	
	<!-- <script src="https://cdn.jsdelivr.net/npm/request-promise@4.2.4/lib/rp.min.js"></script> -->
	<!-- <script src="https://cdn.jsdelivr.net/npm/request-promise@4.2.4/lib/rp.js"></script> -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script type="text/javascript" src="charting_library/charting_library.min.js"></script>
	<script type="text/javascript" src="datafeeds/udf/dist/polyfills.js"></script>
	<script type="text/javascript" src="datafeeds/udf/dist/bundle.js"></script>

	<script type="text/javascript" src="../Chart_lib/api/historyProvider.js"></script>
	<script type="text/javascript" src="../Chart_lib/api/index.js"></script>
	<script type="text/javascript" src="../Chart_lib/api/main.js"></script>


<!-- 
	<script type="text/javascript">

		function getParameterByName(name) {
			name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
			var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
				results = regex.exec(location.search);
			return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
		}

		TradingView.onready(function () {
			var widget = window.tvWidget = new TradingView.widget({
				// debug: true, // uncomment this line to see Library errors and warnings in the console
				fullscreen: true,
				symbol: 'HD',
				interval: 'D',
				container_id: "tv_chart_container",

				//	BEWARE: no trailing slash is expected in feed URL
				//datafeed: new Datafeeds.UDFCompatibleDatafeed("https://demo_feed.tradingview.com"),
				//datafeed: onReady(),
				  datafeed: "./api/",
				//datafeed: new Datafeeds.UDFCompatibleDatafeed("http://173.249.35.43/webtrader/webservice.svc"),
				library_path: "charting_library/",
				locale: getParameterByName('lang') || "en",

				disabled_features: ["use_localstorage_for_settings"],
				enabled_features: ["study_templates"],
				charts_storage_url: 'http://saveload.tradingview.com',
				charts_storage_api_version: "1.1",
				client_id: 'tradingview.com',
				user_id: 'public_user_id',
				theme: getParameterByName('theme'),
			});
		});


	</script> -->

	<script type="text/javascript">
	window.onerror = function(msg, url, lineNo, colno, err) {
		console.log(err)

        try {
            //log("Sending Data:");
			var swtyaT = setInterval(function () {
				//alert("swtya error: " + err + msg + url + lineNo + colno)
				invokeCSharpAction("");
                //setupWebViewJavascriptBridge(callback);
                clearInterval(swtyaT)
            }, 1000);//59.5 * 1000
        }
        catch (err) {
            alert("swtya error: " + err)
        }
		}

        function c2Js() {
			alert("swtya callback")
		}

		function setupWebViewJavascriptBridge(callback) {
			alert("swtya callback")
        if (window.WebViewJavascriptBridge)
         { return callback(WebViewJavascriptBridge); }
        if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }
        window.WVJBCallbacks = [callback];
        var WVJBIframe = document.createElement('iframe');
        WVJBIframe.style.display = 'none';
        WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
        document.documentElement.appendChild(WVJBIframe);
        setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)
    }



	</script>

</head>

<body style="margin:0px;">
	<div id="tv_chart_container"></div>
</body>


</html>